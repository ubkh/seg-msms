{% extends 'base.html' %}
{% block head %} {% include 'partials/navbar.html' %} {% endblock %}
{% block body %}
    <div class="container">
        <h2>Student Lessons</h2>
        <hr>
        <div class="list-group">
            {% for s in current_student %}
                <p>Welcome {{ s.name }}! You can sign up to lessons here and view any pending requests or bookings you may have.</p>
            {% endfor %}
        </div>
    </div>
    &nbsp;
    <div class="mt-2 container">
        <ul class="list-group list-group-light">
            {% for l in lessons %}
                <h5>Waiting to be fulfilled.</h5>
                <li class="list-group-item d-flex justify-content-between align-items-start px-2 rounded-3 mb-3 shadow-sm">
                    <div class="ms-2 me-auto">
                        {% if l.fulfilled is False %}
                            <span class="badge rounded-pill mb-2" style="background-color: orange;">REQUESTED</span>
                        {% else %}
                        <h5>Fulfilled bookings.</h5>
                            <span class="badge rounded-pill bg-success mb-2">BOOKED</span>
                        {% endif %}
                        <div class="fw-bold mb-2">{{ l.title }}</div>
                        <p class="text-muted mb-2">{{ l.information }}</p>
                    </div>
                    <i class="bi bi-person-fill" style="padding-right: 5px;"></i>Teacher &nbsp;
                    <i class="bi bi-clock-fill" style="padding-right: 5px;"></i>{{ l.duration }}m&nbsp;
                    &nbsp;
                    {% if l.fulfilled is False %}
                        <a class="btn btn-light btn-sm" href="{% url 'fulfill_lesson' l.id %}"><i class="bi bi-pencil"></i></a>
                    {% else %}
                        <a class="btn btn-light btn-sm" href="{% url 'booking_invoice' l.id %}"><i class="bi bi-pencil"></i></a>
                    {% endif %}
                    &nbsp;
                    <a class="btn btn-outline-light btn-sm"
                    style="background-color: #e74c3c"
                    href="#"><i class="bi bi-trash3"></i></a>
                </li>
            {% endfor %}
        </ul>
    </div>
    &nbsp;
    <div class="mt-2 container">
        <h3>Recent Transactions</h3>
        <hr>
        <ul class="list-group list-group-light">
            {% for curLesson in lessons %}
                <li class="list-group-item d-flex justify-content-between align-items-start px-2 rounded-3 mb-3 shadow-sm">
                    <div class="ms-2 me-auto">
                        {% if curLesson.paid is True %}
                            <span class="badge rounded-pill bg-success mb-2">PAID</span>
                            <div class="fw-bold mb-2">{{ curLesson.title }}</div>
                            <p class="text-muted mb-2">Successful Transfer: Â£{{ curLesson.price }}</p>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}