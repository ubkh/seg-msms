{% extends 'base/school_base.html' %}
{% block head %}<title>Invoice - Kangaroo Music</title>{% endblock %}
{% block school_body %}
    <div class="container">
        <h1>Booking Invoice:</h1>
        {% for curLesson in lessons %}
            <div>
                <h2>Bill To:</h2>
                <br>

                {% if curLesson.student.parent %}
                    <h4>{{ curLesson.student.parent.first_name }} {{ curLesson.student.parent.last_name }}</h4>
                    <h4>{{ curLesson.student.parent.email }}</h4>
                {% else %}
                    <h4>{{ curLesson.student.first_name }} {{ curLesson.student.last_name }}</h4>
                    <h4>{{ curLesson.student.email }}</h4>
                {% endif %}

                <br>
                <h2>Invoice Number: {{ curLesson.student.id }}-{{ curLesson.id }}</h2>
                <hr>
            </div>
            <div>
                <h2>Title: {{ curLesson.title }}</h2>
                <h3>Instrument: {{ curLesson.instrument }}</h3>
                <br>
                <div class="container">
                    <div class="row border border-dark">
                        <div class="col-sm bg-secondary border border-dark">
                            <h4>Day</h4>
                        </div>
                        <div class="col-sm bg-secondary border border-dark">
                            <h4>Time</h4>
                        </div>
                        <div class="col-sm bg-secondary border border-dark">
                            <h4>Number Of Lessons</h4>
                        </div>
                        <div class="col-sm bg-secondary border border-dark">
                            <h4>Interval</h4>
                        </div>
                        <div class="col-sm bg-secondary border border-dark">
                            <h4>Duration</h4>
                        </div>
                        <div class="w-100"></div>
                        <div class="col-sm bg-info border border-dark">
                            <h5>{{ curLesson.day }}</h5>
                        </div>
                        <div class="col-sm bg-info border border-dark">
                            <h5>{{ curLesson.time }}</h5>
                        </div>
                        <div class="col-sm bg-info border border-dark">
                            <h5>{{ curLesson.number_of_lessons }}</h5>
                        </div>
                        <div class="col-sm bg-info border border-dark">
                            <h5>{{ curLesson.interval }} Week/s</h5>
                        </div>
                        <div class="col-sm bg-info border border-dark">
                            <h5>{{ curLesson.duration }} Minute/s</h5>
                        </div>

                    </div>
                </div>
                <br>
                <h3>Information: {{ curLesson.information }}</h3>
            </div>

            <div>
                <hr>
                <h1>Amount Due: £{{ curLesson.price }}</h1>
            </div>


            <h1>Transfers</h1>
        <h3>Total paid: {{ curLesson.total_paid }}</h3>
            <h3>Total paid: {{ curLesson.payment_status }}</h3>

        {% endfor %}



        {% for transfer in transfers %}
            <li class="list-group-item d-flex justify-content-between align-items-start px-2 rounded-3 mb-3 shadow-sm">
                <div class="ms-2 me-auto">
                    <span class="badge rounded-pill bg-success mb-2">PAID</span>
                    <div class="fw-bold mb-2">{{ transfer.user.id }}-{{ transfer.lesson.id }}</div>
                    <p class="text-muted mb-2">Successful Transfer: £{{ transfer.amount }}</p>
                </div>
            </li>
        {% endfor %}
    </div>
{% endblock %}